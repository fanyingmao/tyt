!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="dist/js/wx/",t(0)}([function(e,t){"use strict";!function(e,t){var n=function(){var e=document.getElementsByTagName("html")[0].getBoundingClientRect().width,n=Math.min(1200,e);return!!n&&void(t.documentElement.style.fontSize=n/16+"px")};n(),e.addEventListener("resize",n,!1),e.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)}(window,document),window.beeGame={},window.special={},beeGame.log=function(e,t){window.gameDebug&&console.log(e,t)},beeGame.hideBtn=!1,~function(e){var t={resOnline:"//res.beetobees.com",res9tech:"//res.9tech.cn",beeOnline:"http://www.beetobees.com"},n={};n.myMaxScore=0;var a=function(e){var t={$name:"sh",get:function(t){if(0===t)return e},html:function(t){return t?(e.innerHTML=t,this):e.innerHTML},show:function(){return e.style.display="block",this},hide:function(){return e.style.display="none",this},remove:function(){e.parentNode&&e.parentNode.removeChild(e)},append:function(t){return"sh"===t.$name&&(t=t.get(0)),e.appendChild(t),this},val:function(t){return"undefined"==typeof t?e.value:(e.value=t,this)},attr:function(t,n){return n?(e.setAttribute(t,n),this):e.getAttribute(t)}};return t};n.orientation=function(e){var t=document.body,n=function(){return!(!window.orientation&&"undefined"==typeof window.orientation)&&void(90==window.orientation||window.orientation==-90?(e&&(t.className="error"),!e&&(t.className="")):(!e&&(t.className="error"),e&&(t.className="")))};n(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",n,!1)};var i={cssText:function(e,t){if(t){var n="";return r.eachJson(t,function(e,t){n+=t+":"+e+";"}),e.style.cssText+=n,e}return e.style.cssText},setbackground:function(e,t){e.style.background="url("+t+") no-repeat",e.style.backgroundSize="100%"},displayBtn:function(e,t){e&&!e.hide&&(e.style.display=t)}},s=document.getElementById("gameDiv"),r={each:function(e,t){for(var n=0,a=e.length;a>n&&t(n,e[n])!==!1;n++);},eachJson:function(e,t){for(var n in e)if(t(e[n],n))return},trim:function(e){return e=e||"",e.replace(/^\s|\s$/g,"").replace(/\s+/g," ")},setAnimation:function(e,t,n,a){return!!e.lock||(e.lock=!0,e.style.animation=e.style.WebkitAnimation=t,setTimeout(function(){e.style.animation=e.style.WebkitAnimation="",e.lock=!1},n),void(a&&setTimeout(function(){a()},n-100)))},createDom:function(e,t){var n=document.createElement(e);return n.className=t?t:"",s.appendChild(n),n},aniClick:function(e,t,n){e.addEventListener(beeGame.touchstart,function(a){!r.setAnimation(e,t+" .3s linear forwards",300)&&setTimeout(n,300),a.preventDefault()},!1)},removeDom:function(e){e&&e.parentNode.removeChild(e)},_htmlDecode:function(e){var t="";return 0==e.length?"":(t=e.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'))},trigger:function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),n.eventType="message",e.dispatchEvent(n)},GetQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}},o=null,l={},c={load:["logo"],rule:["rOther","rEntry","rPrize","rRed","rToken","rScore","shareBtn","cy_logo"],raffle:["PbackBtn","Pbg","PcashBtn","PlotteryBg","PprizeBg","Pgold","into","record-e","Vbutton"],token:["Tback","Tbg","Ttitle"],rank:["RbackBtn","RcloseBtn","RprizeBg","RrankBg","RruleBg","RruleBtn","RwriteBtn"],form:["Fbg","FsubBtn"]};n.preventDefault=function(e){e.preventDefault()},function(){var e="ontouchstart"in window;beeGame.touchstart=e?"touchstart":"mousedown",beeGame.touchmove=e?"touchmove":"mousemove",beeGame.touchend=e?"touchend":"mouseup"}(),n.layer={$dom:a(r.createDom("div","laybg")),load:r.createDom("div","loadingbg"),alertbg:r.createDom("div","alertbg"),chain:0,init:function(){return this.alertbox=r.createDom("div","alert"),this.alertbg.appendChild(this.alertbox),this.run=r.createDom("div"),this.load.appendChild(this.run),this.alertbg.addEventListener(beeGame.touchstart,function(e){return!this.noClick&&(clearTimeout(n.layer.alertimer),n.layer.alertbg.style.display="none",!1)},!1),this.alertbox.addEventListener(beeGame.touchstart,function(e){return e.stopPropagation(),!1},!1),this},show:function(){return 0==this.chain++&&this.$dom.show(),this},hide:function(){return this.chain=Math.max(0,--this.chain),0==this.chain&&this.$dom.hide(),this},qrcode:function(e){this.show().click(function(){r.removeDom(e)})},loadshow:function(e){var t="none",n="";e&&(t="block",n="loader"),this.load.style.display=t,this.run.className=n},click:function(e){function t(i){n.layer.hide(),a.removeEventListener(beeGame.touchstart,t),e&&e(),i.preventDefault()}var a=this.$dom.get(0);a.addEventListener(beeGame.touchstart,t,!1)},alert:function(e,t,n){var a=this;this.noClick=!!t,this.alertbg.style.display="block",this.alertbg.className="alertbg",this.alertbox.innerHTML=e,clearTimeout(this.alertimer),this.alertimer=setTimeout(function(){a.alertbg.style.display="none",n&&n()},2500)},modalDefined:function(e){return this.alertbg.className="alertbg white",this.alertbg.style.display="block",this.alertbox.innerHTML=e,this.alertbg}},n.layer.init().hide();var d=+new Date;beeGame.load={movelock:!0,temjson:null,schedule:!1,num:0,init:function(){document.addEventListener(beeGame.touchmove,n.preventDefault,!1);var e=this;this.bg=r.createDom("div","loadbg"),window.getTemplate(function(t){beeGame.log(t),n.btns.btnDefine=t.btnDefine,e.templateVars=t.templateVars,e.tempPublicVars=t.tempPublicVars,n.shareIcon.isold=!e.tempPublicVars,n.gameRule.desc=e.templateVars.ruleDesc.value,n.gameRule.skin=t.skin?t.skin:"A",n.music.open="true"==t.share.setting.bgAudio&&"true"==t.share.setting.switch,n.music.src=n.music.open&&t.templateVars[t.templateCategory["声音素材"][0]].texUrl,e.loadImg(c.load,function(t){e._draw(t),I9RIA.getSetting(e.loadOther,function(e){alert(JSON.stringify(e))})},!0),beeGame.tempLoadEndFn&&beeGame.tempLoadEndFn(t),beeGame.temjson=t})},loadOther:function(e){beeGame.settingInfo=e,o=e;var t=beeGame.load,a=e.lot_type,i=c.rule;i=i.concat(c.token),i.push(n.gameRule.skin+("3"==a?"-":""));var s=t.needKey=["rule","token"];/0|9|16|18|1|7|10|17|12|13|19/.test(a)?s.push("raffle","form"):"2"===a?s.push("rank"):"4"===a&&s.push("form"),r.each(s,function(e,t){i=i.concat(c[t])}),t.loadImg(i,function(e){l=e,t.schedule=!0,t.move(),beeGame.log("loadImgs",l)}),beeGame.log("needKey",s),t.font.innerHTML=e.loadDesc?e.loadDesc.replace(/(\u8d62\u9500\+)/g,"<span>$1</span>"):"",n.orientation("0"===o.mode||!o.mode)},_draw:function(e){this.bg.innerHTML='<div class="gameload"><img class="logo" src="'+e.logo+'"><div class="centerbox"><div class="bar"></div></div></div><span class="num">0%</span><div class="ld-font"></div>';var t=this.goNum=this.bg.getElementsByClassName("num")[0];this.pgBar=this.bg.getElementsByClassName("bar")[0],this.font=this.bg.getElementsByClassName("ld-font")[0];return setTimeout(function(){t.parentNode.style.display="block"},500),this.drawEnd=!0,this},move:function(e){return this.num=e?e:this.num,e=this.num,beeGame.log(e,this.schedule),!!this.drawEnd&&(this.pgBar.style.width=e+"%",this.goNum.innerHTML=e+"%",100==e&&this.schedule?(this._loadEnd(),!0):void 0)},_loadEnd:function(){var e=this;n.music.init(),1==o.secretinfo.is_secret_visit&&n.secret.init(),setTimeout(function(){r.removeDom(e.bg),n.init(e.needKey),beeGame.load=null,d=+new Date-d,$.post(I9RIA.rpc_host+"/api/opentime/save",{appid:I9RIA.apptoken,time:d})},800)},loadImg:function(e,n,a){var i=this.templateVars,s=this.tempPublicVars,o={},l=0,c=t.resOnline;(location.search.indexOf("_env")>0||location.host.indexOf("bee.9tech.cn")!=-1)&&(c=t.res9tech),r.each(e,function(t,r){var d=r+".png";if(beeGame.log(d),a)o[r]=i[d]&&i[d].texUrl?i[d].texUrl+"?v"+I9RIA.appversion:c+"/h5Resource/"+d,++l==e.length&&n&&n(o);else{var u={};s?(u=s[d]?s[d]:i[d],u=u||{}):u=i[d]?i[d]:{},o[r]=u.texUrl?u.texUrl+"?v"+I9RIA.appversion:c+"/h5Resource/"+d;var m=new Image;m.onload=function(){++l==e.length&&n&&n(o)},m.onerror=function(){console.error(this.src)},m.src=o[r]}})}},beeGame.load.init(),n.secret={init:function(){I9RIA.getSecretStatus({},function(e){0==e.code?n.secret=null:n.secret._draw()})},_draw:function(){this.box=r.createDom("div","scrt-bg");var e=o.secretinfo.secret_desc?'<div class="scrt-desc">'+o.secretinfo.secret_desc+"</div>":"";this.box.innerHTML='<div class="scrt-alert"><input type="text"/><p class="scrt-tip">'+o.secretinfo.secret_prompt+'</p><span class="scrt-msg"></span><a class="scrt-btn">确定</a>'+e+"</div>";var t=this.box.getElementsByTagName("input")[0],a=this.box.getElementsByClassName("scrt-msg")[0],i=this.box.getElementsByClassName("scrt-btn")[0];i.addEventListener(beeGame.touchstart,function(){I9RIA.verifySecret({vcode:t.value},function(e){0==e.code?(r.removeDom(n.secret.box),n.secret=null):a.innerHTML=e.msg})},!1)}},n.music={open:!1,src:"",_audio:null,init:function(){return this._audio=new Audio,!!this.open&&(this._audio.preload="auto",this._audio.loop="loop",this._audio.src=this.src+"?"+I9RIA.appversion,this._audio.load(),void this._audio.addEventListener("loadedmetadata",function(){}))},play:function(){this._audio.play()},pause:function(){this._audio.pause()}},n.gameRule={desc:"",skin:"",destroy:!1,eventTime:0,score:0,init:function(){var e=this;return this._draw().isBtnShow(!0),this.ruleBtn.addEventListener(beeGame.touchstart,function(t){e.isShow(!0)},!1),this.btns.addEventListener(beeGame.touchstart,function(t){e._tabClick(t.target.getAttribute("value"),t.target)},!1),this.closeBtn.addEventListener(beeGame.touchstart,function(t){e.isShow(!1)},!1),this.myPrizeEvent(this.cons[1]),o.marketinginfo.rule_show?(setTimeout(function(){e.isShow(!0)},300),this):this},isBtnShow:function(e){return this.destroy&&(e=!1),this.ruleBtn.style.display=e?"block":"none",this},isShow:function(e,t){e?(this.box.style.display="block",this.logoShow(!0),r.each(this.tabs,function(e,t){t.setAttribute("data",0)}),this._tabClick(t?t:"0")):(this.box.style.display="none",m.closeRuleCallBack&&m.closeRuleCallBack())},_draw:function(){var e=this.ruleBtn=r.createDom("div","rule-btn");this.skin=this.skin?this.skin:"A";var t=this.skin+("3"==o.lot_type?"-":"");i.setbackground(e,l[t]);var n=/^2$|^3$|^4$|^8$/.test(o.lot_type)?"":'<a class="rule-tab" value="1" data="0">我的奖品</a>',a=1==o.setwxcredit?'<a class="rule-tab" value="2" data="0">积分兑换</a>':"",s="1"===o.is_display_ranking?'<a class="rule-tab" value="3" data="0">排行榜</a>':"",c=n||a||s?"":"rule-only";this.box=r.createDom("div","rule-box "+this.skin),this.box2=r.createDom("div","rule-box "+this.skin);var d='<div class="rule-head"><div class="rule-btns clearfix '+c+'"><a class="rule-tab" value="0" data="0">活动规则</a>'+n+a+s+'</div><a class="rule-close"></a></div><div class="rule-conbox"><div class="rule-con clearfix">'+r._htmlDecode(this.desc)+'</div><div class="rule-con clearfix"></div><div class="rule-con clearfix"></div><div class="rule-con clearfix"></div></div><div class="rule-footer"><a href="" class="rule-like r-item"></a><a href="" class="hide r-item"></a><a href="" class="hide r-item"></a><a href="" class="rule-info r-item"></a></div>';this.box.innerHTML=d,this.tabs=this.box.getElementsByClassName("rule-tab"),this.cons=this.box.getElementsByClassName("rule-con"),this.items=this.box.getElementsByClassName("r-item"),this.btns=this.box.getElementsByClassName("rule-btns")[0],this.closeBtn=this.box.getElementsByClassName("rule-close")[0];var u=document.getElementsByTagName("html")[0],m=u.getBoundingClientRect().width/16,p=u.getBoundingClientRect().height;return this.cons[0].style.height=this.cons[1].style.height=this.cons[2].style.height=p-6*m+"px",this.cons[3].setAttribute("data",p-12*m+"px"),this.cons[0].addEventListener(beeGame.touchmove,function(e){e.stopPropagation()},!1),this.cons[1].addEventListener(beeGame.touchmove,function(e){e.stopPropagation()},!1),this.logo=r.createDom("img","cy-logo"),this.logo.src=l.cy_logo,this.logoIsShow(!0),this},logoIsShow:function(e){return!(I9RIA.appctime<1499066653)&&void(this.logo.style.display=e?"block":"none")},_tabClick:function(e,t){if(!e&&0!=e)return!1;this._returned();var n=t?t:this.tabs[e];if(n.className="rule-tab on",this.cons[e].style.display="block",this.items[e].style.display="block","1"==n.getAttribute("data"))return!1;switch(n.setAttribute("data","1"),e){case"1":this.initMyPrize(n,this.cons[e]);break;case"2":this.initScore(n,this.cons[e]);break;case"3":this.initRank(n,this.cons[e])}},_returned:function(){var e=this;r.each(this.tabs,function(e,t){t.className="rule-tab"}),r.each(this.cons,function(t,n){n.style.display="none",e.items[t].style.display="none"})},logoShow:function(e){var t=this;I9RIA.getMoon(2,function(e){return"0000"===e.id?(console.log("adimglogo:"+e.id),!1):(t.items[0].style.backgroundImage="url("+e.elements[0].imageurl+")",void(t.items[0].href=e.elements[0].imagepath))},function(e){console.error(e)})},initMyPrize:function(e,t){var a=this;return n.layer.loadshow(!0),I9RIA.getMyPrizes(function(e){n.layer.loadshow(!1),a._drawPrizeList(t,e),console.log(e)},null),this},_drawPrizeList:function(e,t){var n='<ul class="my-ul">';r.each(t,function(e,t){if("3"===t.transcodestatus)n+='<li class="my-li type2" value="'+t.transcode+'" alt="'+t.verify_code+'"><div class="my-box"><div class="my-pic" style="background-image: url('+l.rToken+')"></div><span class="my-name">口令</span></div><a class="my-btn powder">马上兑奖</a></li>';else if(/^0$|^9$|16|18/.test(t.lot_type)){var a="1"===t.gamecode_status?"已发放":"查看兑奖信息";n+='<li class="my-li type1" data="{|is_appear|:|'+t.is_appear+'|}" alt="'+t.verify_code+"|"+t.gamecode_status+'"><div class="my-box"><div class="my-pic" style="background-image:url('+t.lot_url+')"></div><span class="my-name">'+t.lot_name+'</span></div><a class="my-btn orange">'+a+"</a></li>"}else if(/^1$|^7$|10|17/.test(t.lot_type)){var a="1"===t.gamecode_status?"已使用":"查看券号",i="{|lot_name|:|"+t.lot_name+"|,|game_code|:|"+t.gamecode+"|,|is_appear|:|"+t.is_appear+"|}";n+='<li class="my-li type3" data="'+i+'" alt="'+t.verify_code+"|"+t.gamecode_status+'"><div class="my-box"><div class="my-pic" style="background-image: url('+l.rEntry+')"></div><span class="my-name">'+t.lot_name+'</span></div><a class="my-btn orange">'+a+"</a></li>"}else if(/12|13|19/.test(t.lot_type))n+='<li class="my-li type5" value="'+t.prizes_link+'" alt="'+t.verify_code+'"><div class="my-box"><div class="my-pic" style="background-image: url('+l.rOther+')"></div><span class="my-name">'+t.lot_name+'</span></div><a class="my-btn powder">去兑奖</a></li>';else if(/^20/.test(t.lot_type)){var s=t.lottery_id+","+t.lot_name+","+t.lot_desc+","+t.lot_code_setting.lot_unit_price;if(/^1$|^2$|^3$|^4$/.test(t.rcv_status)){var r={3:"发放中",2:"未领取",1:"已领取",4:"未领取"};n+='<li class="my-li type4"  value="'+s+'" alt="'+t.verify_code+'"><div class="my-box"><div class="my-pic" style="background-image: url('+l.rRed+')"></div><span class="my-name">'+t.lot_name+'</span></div><a class="my-btn powder">'+r[t.rcv_status]+'</a><span class="my-money">'+t.lot_code_setting.lot_unit_price+"元</span></li>"}else 0!=t.rcv_status&&5!=t.rcv_status||(n+='<li class="my-li type4"  value="'+s+'" alt="'+t.verify_code+'"><div class="my-box"><div class="my-pic" style="background-image: url('+l.rRed+')"></div><span class="my-name">'+t.lot_name+'</span></div><a class="my-btn powder">已过期</a><span class="my-money">'+t.lot_code_setting.lot_unit_price+"元</span></li>")}else/^22/.test(t.lot_type)&&(n+='<li class="my-li type6"  value="" alt="'+t.verify_code+'"><div class="my-box"><div class="my-pic" style="background-image: url('+l.rScore+')"></div><span class="my-name">积分</span></div><a class="my-btn powder">积分兑换</a><span class="my-money">'+t.lot_code_setting.lot_unit_credit+"</span></li>")}),0===t.length&&(n+='<li class="my-empty">您目前没有任何奖品</li>'),e.innerHTML=n+"</ul>"},myPrizeEvent:function(e){function a(e){if("LI"===e.tagName||"rule-conbox"==e.className)return e;var t=e.parentNode;return"LI"===t.tagName?t:a(t)}var i=this;e.addEventListener(beeGame.touchstart,function(e){i.eventTime=+new Date}),e.addEventListener(beeGame.touchend,function(e){if(+new Date-i.eventTime>200)return!1;var s=a(e.srcElement);if(console.log(s),s.getAttribute("alt")){var r=s.getAttribute("alt").split("|"),o=r[0];n.gameRule.verifiStatus="1"===r[1]?"已核销":"点击查看兑奖二维码";var l=location.origin.indexOf("9tech")===-1?t.beeOnline:location.origin;n.gameRule.verifiCodeData=[l+"/verification/result.html?token="+o,o]}if(s.className.indexOf("type1")>-1){var c=JSON.parse(s.getAttribute("data").replace(/\|/g,'"'));n.iForm.mainClick(c)}else if(s.className.indexOf("type2")>-1)n.iPrize.winPrizeD({transcode:s.getAttribute("value")});else if(s.className.indexOf("type3")>-1){var c=JSON.parse(s.getAttribute("data").replace(/\|/g,'"'));n.iPrize.winPrizeB({prize:{lot_name:c.lot_name,is_appear:c.is_appear},game_code:c.game_code})}else if(s.className.indexOf("type5")>-1)n.iPrize.winPrizeC({prizes_link:s.getAttribute("value")});else if(s.className.indexOf("type4")>-1){var d=s.getAttribute("value").split(",");n.iPrize.winPrizeE({lottery_id:d[0],prize:{lot_name:d[1],lot_winning_tips:d[2],lot_code_setting:{lot_unit_price:d[3]}}},function(){})}else s.className.indexOf("type6")>-1&&i._tabClick("2")},!1)},initRank:function(e,t){var a=this;return n.layer.loadshow(!0),I9RIA.getMyRank({lot_id:"0",pagesize:100,order:o.score_order},function(e){n.layer.loadshow(!1),a._drawRankList(t,e),console.log(e)},function(){n.layer.loadshow(!1),n.layer.alert("获取数据异常！")}),this},_drawRankList:function(e,t){var a='<div class="rule-rhead"><div class="rule-req">排名</div><div class="rule-rname">昵称</div><div class="rule-rscore">成绩</div></div><div class="rule-rmyscore"><div class="rule-req">'+(t.my_rank.ranking?t.my_rank.ranking:"")+'</div><div class="rule-rname">'+(t.my_rank.nickname?t.my_rank.nickname:"")+'</div><div class="rule-rscore">'+(t.my_rank.lot_count||0==t.my_rank.lot_count?t.my_rank.lot_count:"")+'</div></div><div class="rule-rscroll">';r.each(t.total_rank,function(e,t){a+='<div class="rule-rscorelist"><div class="rule-req">'+(e+1)+'</div><div class="rule-rname">'+t.nickname+'</div><div class="rule-rscore">'+t.lot_count+"</div></div>"}),e.innerHTML=a+'</div><p class="rule-rdesc">只显示前100名 ▲ 向上查看更多</p>';var i=r.createDom("div","rule-rdj");i.innerHTML="填写兑奖信息",r.aniClick(i,"btn",function(){n.iRank.setTelForRank()}),e.appendChild(i);var s=e.getElementsByClassName("rule-rscroll")[0];s.style.height=e.getAttribute("data"),s.addEventListener(beeGame.touchmove,function(e){e.stopPropagation()},!1)},initScore:function(e,t){var n=this;I9RIA.creditBalance({},function(a){n.score=a,n._darwScoreList(e,t)})},_darwScoreList:function(e,t){var a='<div class="my-sinfo"><img class="my-bgold" src="'+l.Pgold+'"><span class="my-yue">总积分 '+this.score+'</span><a class="my-ibtn earn">赚取积分</a><a class="my-ibtn record">积分记录</a></div><ul class="my-ul">';a+='<li class="my-li type4"  value=""><div class="my-box tr"><div class="my-pic" style="background-image: url('+l.rRed+')"></div><span class="my-money score">1元</span><span class="my-name cl">1元红包</span><img class="my-sgold" src="'+l.Pgold+'"><span class="my-name score">100积分</span></div><a class="my-btn" value="1">立即兑换</a></li><li class="my-li type4"  value=""><div class="my-box tr"><div class="my-pic" style="background-image: url('+l.rRed+')"></div><span class="my-money score">1.5元</span><span class="my-name cl">1.5元红包</span><img class="my-sgold" src="'+l.Pgold+'"><span class="my-name score">150积分</span></div><a class="my-btn" value="1.5">立即兑换</a></li><li class="my-li type4"  value=""><div class="my-box tr"><div class="my-pic" style="background-image: url('+l.rRed+')"></div><span class="my-money score">2元</span><span class="my-name cl">2元红包</span><img class="my-sgold" src="'+l.Pgold+'"><span class="my-name score">200积分</span></div><a class="my-btn" value="2">立即兑换</a></li><li class="my-li type4"  value=""><div class="my-box tr"><div class="my-pic" style="background-image: url('+l.rRed+')"></div><span class="my-money score">3元</span><span class="my-name cl">3元红包</span><img class="my-sgold" src="'+l.Pgold+'"><span class="my-name score">300积分</span></div><a class="my-btn" value="3">立即兑换</a></li>',t.innerHTML=a;var i=this,s=t.getElementsByClassName("my-yue")[0];t.addEventListener(beeGame.touchend,function(e){function t(e){return 100*a>i.score?(n.layer.alert("积分不足"),!1):(n.layer.loadshow(!0),void I9RIA.creditExchange({cash:parseFloat(a)},function(e){n.layer.alert(e.msg),i.score-=100*a,s.innerHTML=i.score,n.layer.loadshow(!1)},function(e){n.layer.alert(e.msg),n.layer.loadshow(!1)}))}var a="1",r=e.srcElement;if(r.className.indexOf("record")>-1)i.initScoreMore(i.box2,!1);else if(r.className.indexOf("earn")>-1)i.initScoreMore(i.box2,!0);else if(r.className.indexOf("my-btn")>-1){a=r.getAttribute("value");var o='<p class="my-p">是否兑换<span class="my-num">'+a+'</span>元微信红包?</p><div class="my-cbtn qxiao">取消</div><div class="my-cbtn qding">确定</div>',l=n.layer.modalDefined(o),c=l.getElementsByClassName("qxiao")[0],d=l.getElementsByClassName("qding")[0];d.addEventListener(beeGame.touchend,t,!1),c.addEventListener(beeGame.touchend,function(){l.style.display="none"},!1)}}),t.addEventListener(beeGame.touchmove,function(e){e.stopPropagation()},!1)},initScoreMore:function(e,t){var a=t?"玩游戏赚积分 ":"积分记录",i='<div class="rule-head"><div class="rule-btns clearfix"><a class="rule-tab on">'+a+'</a></div><a class="rule-close"></a></div><div class="rule-conbox"><div class="rule-con clearfix" style="background:#fff"></div></div>';e.innerHTML=i,e.style.display="block";var s=e.getElementsByClassName("rule-close")[0],r=e.getElementsByClassName("rule-con")[0];r.style.height=this.cons[2].offsetHeight+"px",s.addEventListener(beeGame.touchend,function(){e.style.display="none"},!1),r.addEventListener(beeGame.touchmove,function(e){r.scrollTop>=r.scrollHeight-r.offsetHeight&&d(++c),e.stopPropagation()},!1),n.layer.loadshow(!0);var o="",l=!1,c=1,d=function(e){return!l&&(l=!0,void I9RIA.creditGetRecordInfo({p:e,list_row:20},function(e){if(!e)return l=!0,!1;for(var t=0;t<e.length;t++)o+='<div class="sr-item"><span class="sr-name el">'+e[t].desc+'</span><span class="sr-jfen">'+e[t].point+'积分</span><span class="sr-time">'+e[t].create_time+"</span></div>";n.layer.loadshow(!1),l=!1,r.innerHTML+=o}))};t?location.href="http://wz2.i2035.com/#/store ":d(c)},verifiStatus:"",verifiCodeData:[],verificode:function(){var e=r.createDom("div","v-codebox"),t=r.createDom("div","v-tip"),a=r.createDom("div","v-codediv"),i=r.createDom("p","v-code");i.innerHTML=this.verifiCodeData[1],t.innerHTML="线下兑奖时，可将二维码 出示给商家，核销后领奖",e.appendChild(t),e.appendChild(a),e.appendChild(i),n.layer.qrcode(e);new QRCode(a,{text:n.gameRule.verifiCodeData[0],correctLevel:QRCode.CorrectLevel.H})}},beeGame.gameRules={show:function(e){n.gameRule.isBtnShow(e)}},n.spread={type:1,init:function(){return this},_drawFont:function(e){var t=this.$image=a(r.createDom("a","spread-font"));t.attr("href",e.linkpath).html(e.linkname.replace(/(\u8d62\u9500\+)/g,"<span>$1</span>"))},_drawImg:function(e){for(var t=this.$image=a(r.createDom("div","spread-image")),n="",i=0;i<e.length;i++)n+='<a class="spread-img" style="background-image:url('+e[i].imageurl+');" href="'+e[i].imagepath+'"></a>';t.html(n);var s=this,o=r.createDom("a","spread-close");o.innerHTML="×",o.addEventListener(beeGame.touchstart,function(){s.close()},!1),t.append(o)},_drawWith:function(e){var t=this.$image=a(r.createDom("div","spread-box")),n=a(r.createDom("a","spread-dbfont")),i=a(r.createDom("a","spread-dbfont"));i.get(0).style.border="none",n.attr("href",e.basepath).html(e.basename.replace(/(\u8d62\u9500\+)/g,"<span>$1</span>")),i.attr("href",e.unionpath).html(e.unionname.replace(/(\u8d62\u9500\+)/g,"<span>$1</span>")),console.log(n),console.log(i),t.append(n),t.append(i)},isShow:function(e){if(!e)return this.close(),!1;var t=this;return I9RIA.getMoon(1,function(e){if("0000"===e.id)return n.spread=null,!1;switch(console.log("getResultPageBanner:",e.elements),e.type){case 1:t._drawFont(e.elements[0]);break;case 2:t._drawImg(e.elements);break;case 4:t._drawWith(e.elements[0])}},function(e){console.error(e)}),this},close:function(){this.$image&&this.$image.remove()}},n.comp={init:function(){var e=this;return this.$inBtn=a(r.createDom("a","comp-open")).html("举报"),r.aniClick(this.$inBtn.get(0),"btn",function(){e.step1()}),this.isShow(!0),this},isShow:function(e){this.$inBtn[e?"show":"hide"]()},step1:function(){var e=this;this.$bg=a(r.createDom("div","comp-bg"));var t='<p class="comp-title">请选择投诉原因</p>\t\t\t\t\t\t\t<ul class="comp-ul">\t\t\t\t\t\t\t\t<li class="comp-item" value="1">欺诈</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="2">色情</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="3">政治谣言</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="4">常识性谣言</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="5">诱导分享</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="6">恶意营销</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="7">隐私信息收集</li>\t\t\t\t\t\t\t\t<li class="comp-item" value="8">其他侵权类（冒名、诽谤、抄袭）</li>\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t<a class="comp-btn next">下一步</a>\t\t\t\t\t\t\t<a class="comp-btn back">取 消</a>';this.$bg.html(t);var n="";this.$bg.get(0).addEventListener(beeGame.touchstart,function(t){var a=t.srcElement;if("LI"==a.tagName){for(var i=a.parentNode,s=i.children,r=0;r<s.length;r++)s[r].className="comp-item";a.className="comp-item on",n=a.getAttribute("value")}else if(a.className.indexOf("next")>-1){if(!n)return alert("请选择投诉原因"),!1;e.step2(n)}else a.className.indexOf("back")>-1&&(t.stopPropagation(),e.$bg.remove());t.preventDefault()},!1)},step2:function(e){var t=this,n=r.createDom("textarea","comp-area"),a=r.createDom("a","comp-btn");a.innerHTML="提交",n.setAttribute("maxlength",50);var i=!1;a.addEventListener(beeGame.touchstart,function(s){return s.stopPropagation(),!i&&(i=!0,a.innerHTML="提交中...",s.preventDefault(),setTimeout(function(){t.step3()},400),void I9RIA.report({title:TemplateUtils.getShare().wechat.title,textlink:encodeURIComponent(location.href),reason:e,desc:n.value}))}),n.addEventListener(beeGame.touchstart,function(e){e.stopPropagation()}),this.$bg.html('<p class="comp-title">投诉描述</p>').append(n).append(a)},step3:function(){var e=this,t='<div class="comp-logo"></div>\t\t\t\t\t\t\t<h3 class="comp-title2">投诉成功</h3>\t\t\t\t\t\t\t<p class="comp-desc">感谢你的参与，我们坚决反对色情、暴力、欺诈等违规信息，我们会认真处理你的投诉，维护绿色、健康的网络环境。</p>';this.$bg.html(t);var n=r.createDom("a","comp-btn");n.innerHTML="确定",n.addEventListener(beeGame.touchstart,function(t){t.stopPropagation(),e.$bg.remove(),t.preventDefault()}),this.$bg.append(n)}},n.shareIcon={isold:!1,sourceType:1,typelinks:null,init:function(){if(n.refrenshShareData("","",!0),this.sourceType=I9RIA.source_type,!n.btns.btnDefine)return n.shareIcon=null,!1;if(this.isold&&n.btns.btnDefine.about&&n.btns.btnDefine.about.display)return n.shareIcon=null,!1;if(n.btns.btnDefine.share)return n.shareIcon=null,!1;if(2!=this.sourceType&&3!=this.sourceType&&4!=this.sourceType)return this.shareicon=r.createDom("img","shareicon"),this.shareicon.src="resource/assets/shareImg.png?v="+I9RIA.appversion,!1;this.shareicon=r.createDom("a","shareBtn"),i.setbackground(this.shareicon,l.shareBtn);var e=this;r.aniClick(this.shareicon,"btn",function(){e.toShare()})},setHref:function(e){this.typelinks=e},toShare:function(){return 4==this.sourceType?void(window.alipayShare&&window.alipayShare()):(2==this.sourceType||3==this.sourceType)&&void(location.href=this.typelinks[this.sourceType])},isShow:function(e){this.shareicon.style.display=e?"block":"none"}},n.btns={btnDefine:{},init:function(e){if(!this.btnDefine||!this.btnDefine.again["background-image"])return beeGame.hideBtn=!0,!1;/\braffle\b/.test(e)?this.initPrizeBtn():/\bform\b/.test(e)?this.initFormBtn():/\brank\b/.test(e)&&this.initRankBtn(),this.initAgainBtn(),this.initAboutBtn(),n.btns.isShow(!1)},initPrizeBtn:function(){this.btn=this._drawBtn("lottery"),r.aniClick(this.btn,"btn",function(){n.iPrize.mainClick()})},initRankBtn:function(){this.btn=this._drawBtn("rank"),r.aniClick(this.btn,"btn",function(){n.iRank.mainClick()})},initFormBtn:function(){this.btn=this._drawBtn("signUp"),r.aniClick(this.btn,"btn",function(){n.iForm.mainClick({isform:!0})})},initAgainBtn:function(){this.againBtn=this._drawBtn("again"),r.aniClick(this.againBtn,"btn",function(){beeGame.gameAgain()})},initAboutBtn:function(){return"1"==o.marketinginfo.promotion_isset&&(this.aboutBtn=this._drawBtn("about"),void r.aniClick(this.aboutBtn,"btn",function(){n.iAboutClick()}))},isShow:function(e){if(beeGame.hideBtn)return!1;var t=e?"block":"none";this.btn&&(this.btn.style.display=t),this.againBtn&&(this.againBtn.style.display=t),this.aboutBtn&&(this.aboutBtn.style.display=t)},_drawBtn:function(e){var t=r.createDom("div","baseBtn"),n=this.btnDefine[e];return n["background-image"]?n["background-image"]=n["background-image"].split(")")[0]+"?v="+I9RIA.appversion+")":n.background="url("+n.background.split(")")[0]+"?v="+I9RIA.appversion+")",i.cssText(t,n),t}},n.iAboutClick=function(){if("2"!=o.marketinginfo.promotion_type)return document.location.href=o.marketinginfo.redictpath,!1;var e=r.createDom("box","qrcodebox"),t=r.createDom("img","qrcode-1"),a=r.createDom("p","qrcodefont");a.innerHTML="长按图片,识别二维码",t.src=o.marketinginfo.qrcodepath,e.appendChild(t),e.appendChild(a),n.layer.qrcode(e)},n.iPrize={unOtherV:!0,isOpen:!1,init:function(){},opstions:{},openClick:function(e){this.opstions=e,this.unOtherV=!1,this.mainClick()},mainClick:function(e){if(this.isOpen)return!1;e=e?e:n.gameScore;var t=o.score_order.toLocaleUpperCase();if(o.isEnd)n.layer.alert(o.endtitle);else{if(this.unOtherV&&!n.pass)return n.layer.alert("您还没过关，再来一次吧！"),!1;if(this.unOtherV&&!n.hasCount)return n.layer.alert("抽奖次数已用尽，请重玩游戏获得次数"),!1;this.unOtherV&&o.setscorelimit&&("DESC"==t&&e<o.scorelimit||"ASC"==t&&e>o.scorelimit)?n.layer.alert(o.unablerafflemsg):(n.layer.loadshow(!0),n.iPrize.isOpen=!0,I9RIA.raffle(function(e){n.layer.loadshow(!1),e.prize?n.iPrize.resultMainFn(e):n.layer.alert(o.nowinmsg,!1,function(){n.iPrize.isOpen=!1})},function(e){n.layer.alert(e.msg),n.layer.loadshow(!1)},this.opstions))}n.hasCount=!1},resultMainFn:function(e,a){n.gameRule.verifiStatus="点击查看兑奖二维码";var i=location.origin.indexOf("9tech")===-1?t.beeOnline:location.origin;n.gameRule.verifiCodeData=[i+"/verification/result.html?token="+e.prize.verify_code,e.prize.verify_code],"12"==e.prize.lot_type?n.iPrize.winPrizeC(e.prize):"1"!=o.settranscode||a?e.game_code?n.iPrize.winPrizeB(e):"20"==e.prize.lot_type?n.iPrize.winPrizeE(e):"22"==e.prize.lot_type?n.iPrize.winPrizeF(e.prize):n.iPrize.winPrizeA(e.prize):n.iPrize.winPrizeD(e)},winPrizeA:function(e){var t=r.createDom("div","win-bg");i.setbackground(t,l.Pbg);var a='<h1 class="win-tit">'+e.lot_winning_tips+'</h1>\t\t\t\t<div class="win-pic" style="background: url('+l.PprizeBg+') 0% 0% / 100% no-repeat;">\t\t\t\t<img src="'+e.lot_url+'"></div><p class="win-tip">'+e.lot_name+'</p>\t\t\t\t<a class="win-btn" style="background: url('+l.PcashBtn+') 0% 0% / 100% no-repeat;"></a>';t.innerHTML=a;var s=t.getElementsByClassName("win-btn")[0];r.aniClick(s,"btn",function(){return r.removeDom(t),n.iForm.mainClick(),!1})},winPrizeB:function(e){var t=r.createDom("div","win-bg");i.setbackground(t,l.Pbg);var a='<h1 class="win-tit">'+(e.prize.lot_winning_tips?e.prize.lot_winning_tips:"")+"</h1>";a+='<div class="win-pic" style="background: url('+l.PlotteryBg+') 0% 0% / 100% no-repeat;"><p class="win-code">'+e.game_code+'</p></div>\t\t\t\t<p class="win-tip">'+e.prize.lot_name+'</p><div class="win-vbtn" style="background-image: url('+l.Vbutton+');">'+n.gameRule.verifiStatus+'</div><a class="win-btn" style="background: url('+l.PbackBtn+') 0% 0% / 100% no-repeat;"></a>',t.innerHTML=a;var s=t.getElementsByClassName("win-btn")[0],o=t.getElementsByClassName("win-vbtn")[0];"1"!=e.prize.is_appear&&(o.style.display="none"),
r.aniClick(s,"btn",function(){return n.iPrize.isOpen=!1,r.removeDom(t),!1}),o.addEventListener(beeGame.touchstart,function(e){n.gameRule.verificode()},!1)},winPrizeC:function(e){document.location.href=e.prizes_link},winPrizeD:function(e){document.removeEventListener(beeGame.touchmove,n.preventDefault,!1);var t=r.createDom("div","tk-bg");i.setbackground(t,l.Tbg);var a='<div class="tk-title" style="background: url('+l.Ttitle+') 0% 0% / 100% no-repeat;"><div class="tk-tip">长按复制</div></div>\t\t\t\t<p class="tk-token">'+e.transcode+'</p>\t\t\t\t<div class="tk-box">\t\t\t\t\t<div class="tk-title2">口令兑奖方式</div>\t\t\t\t\t<p class="tk-desc">'+o.transcodedesc+'</p>\t\t\t\t\t<img class="tk-qrcode" src="'+o.transcodeqrcodepath+'">\t\t\t\t</div>\t\t\t\t<a class="tk-back" style="background: url('+l.Tback+') 0% 0% / 100% no-repeat;"></a>';t.innerHTML=a;var s=t.getElementsByClassName("tk-back")[0];t.getElementsByClassName("tk-token")[0];r.aniClick(s,"btn",function(){n.iPrize.isOpen=!1,r.removeDom(t),document.addEventListener(beeGame.touchmove,n.preventDefault,!1)})},winPrizeE:function(e,t){var a=e.prize,i=r.createDom("div","env-box"),s='<div class="env-res"><div class="env-top"></div>\t\t\t\t\t\t<div class="env-avatar"><img src="'+I9RIA.share_icon+'"/></div>\t\t\t\t\t\t<p class="env-name">'+a.lot_name+'</p>\t\t\t\t\t\t<p class="env-tips">'+a.lot_winning_tips+'</p>\t\t\t\t\t\t<p class="evn-money"><span>'+a.lot_code_setting.lot_unit_price+'</span><span class="evn-unit">元</span></p>\t\t\t\t\t\t<a class="evn-close">关闭</a>\t\t\t\t\t</div>';i.innerHTML=s;var o=i.getElementsByClassName("env-res")[0],l=i.getElementsByClassName("evn-close")[0];return o.style.display="block",l.addEventListener(beeGame.touchstart,function(e){n.iPrize.isOpen=!1,r.removeDom(i)},!1),!1},winPrizeF:function(e){var t=r.createDom("div","win-bg");i.setbackground(t,l.Pbg);var n='<h1 class="win-tit">'+e.lot_winning_tips+'</h1>\t\t\t\t<div class="win-pic" style="background: url('+l.PprizeBg+') 0% 0% / 100% no-repeat;"><img src="'+l.rScore+'"><p class="win-score">'+e.lot_code_setting.lot_unit_credit+'</p></div>\t\t\t\t<p class="win-tip">积分</p>\t\t\t\t<a class="win-btn" style="background: url('+l.PbackBtn+') 0% 0% / 100% no-repeat;"></a>';t.innerHTML=n;var a=t.getElementsByClassName("win-btn")[0];r.aniClick(a,"btn",function(){return r.removeDom(t),!1})}},n.iRank={init:{},mainClick:function(){n.layer.loadshow(!0),I9RIA.getMyRank({lot_id:"0",pagesize:100,order:o.score_order},function(e){n.layer.loadshow(!1),n.iRank._openRankList(e)},function(){n.layer.loadshow(!1),n.layer.alert("获取数据异常！")})},_openRankList:function(e){var t=r.createDom("div","win-bg");i.setbackground(t,l.RrankBg);var a='<div class="rk-myscore"><span class="rk-eq">'+(e.my_rank.ranking?e.my_rank.ranking:"")+'</span><span class="rk-name">'+(e.my_rank.nickname?e.my_rank.nickname:"")+'</span><span class="rk-score">'+(e.my_rank.lot_count?e.my_rank.lot_count:"")+'</span></div><div class="rk-box">';r.each(e.total_rank,function(e,t){a+='<div class="rk-myscore other"><span class="rk-eq">'+(e+1)+'</span><span class="rk-name">'+t.nickname+'</span><span class="rk-score">'+t.lot_count+"</span></div>"}),t.innerHTML=a+"</div>";var s=r.createDom("a","rk-back"),c=r.createDom("a","rk-setNum");if(i.setbackground(s,l.RbackBtn),i.setbackground(c,l.RwriteBtn),t.appendChild(c),t.appendChild(s),r.aniClick(s,"btn",function(){n.iPrize.isOpen=!1,r.removeDom(t)}),r.aniClick(c,"btn",function(){n.iRank.setTelForRank()}),"0"===o.is_display_ranking||"2"==o.lot_type){var d=r.createDom("a","rk-rule");i.setbackground(d,l.RruleBtn),t.appendChild(d),r.aniClick(d,"btn",function(){n.iRank.openRankRule()})}else c.className="rk-setNum two";var u=t.getElementsByClassName("rk-box")[0];u.addEventListener(beeGame.touchmove,function(e){var t=u.scrollTop;t<=0&&(u.scrollTop=1),t+u.offsetHeight>=u.scrollHeight&&(u.scrollTop=u.scrollHeight-u.offsetHeight-1),e.stopPropagation()},!1)},setTelForRank:function(){I9RIA.getGamedata("baoming","baoming",function(e){a.value=e&&e.tel||""},function(){});var e='<input type="tel" class="rk-inptel" placeholder="请输入手机号，作为兑奖凭证"/><p class="rk-tip"></p><div class="rk-tbtn">确定</div>',t=n.layer.modalDefined(e),a=t.getElementsByClassName("rk-inptel")[0],i=t.getElementsByClassName("rk-tip")[0],s=t.getElementsByClassName("rk-tbtn")[0];r.aniClick(s,"btn",function(){return/^1[3-9]\d{9}$/.test(a.value)?(n.layer.loadshow(!0),void I9RIA.baoming("baoming",{tel:a.value},function(){n.layer.loadshow(!1),i.innerHTML="提交成功",setTimeout(function(){t.style.display="none"},800)},function(e){n.layer.loadshow(!1),i.innerHTML=e.msg,setTimeout(function(){t.style.display="none"},800)})):(i.innerHTML="请输入正确的号码",!1)})},openRankRule:function(){var e=function(){var e=function(e){return e>9?e:"0"+e},t=new Date(1e3*o.endtime);return t.getFullYear()+"年"+e(t.getMonth()+1)+"月"+e(t.getDate())+"日"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}(),t=r.createDom("div","win-bg");i.setbackground(t,l.RruleBg);for(var n='<p class="rl-endtime">结束时间：'+e+'</p><p class="rl-depict">'+o.prizeruledesc+'</p><div class="rl-pbox">',a=o.prizes.length,s=0;s<a;s++){var c=o.prizes[s].firstnum,d=o.prizes[s].lastnum,u=c===d?c:c+"~"+d,m=1===a?"only":"";n+='<div class="rl-item '+m+'">\t\t\t\t\t<div class="rl-pname" style="background:url('+l.RprizeBg+') no-repeat;background-size:100%;">\t\t\t\t\t<p class="rl-eq">第'+u+'名</p><img class="rl-img" src="'+o.prizes[s].lot_url+'"/></div>\t\t\t\t\t<div class="rl-lotname">'+o.prizes[s].lot_name+"</div></div>"}t.innerHTML=n+"</div>";var p=t.getElementsByClassName("rl-pbox")[0];p.addEventListener(beeGame.touchmove,function(e){e.stopPropagation()},!1);var h=r.createDom("a","rl-close");i.setbackground(h,l.RcloseBtn),t.appendChild(h),r.aniClick(h,"btn",function(){r.removeDom(t)})}},n.iForm={init:function(){},formData:null,mainClick:function(e){if(e=e||{},o.isEnd&&e.isForm)return n.layer.alert(o.endtitle),!1;var t=this.bg=r.createDom("div","win-bg"),a=r.createDom("p","fm-title"),s=r.createDom("div","fm-boxbg"),c=r.createDom("div","fm-box"),d=r.createDom("a","fm-subBtn");if(i.setbackground(t,l.Fbg),i.setbackground(d,l.FsubBtn),a.innerHTML=o.formruledesc,t.appendChild(a),t.appendChild(s),!e.isForm&&"1"==e.is_appear){var u=r.createDom("div","win-vbtn");i.setbackground(u,l.Vbutton),u.innerHTML=n.gameRule.verifiStatus,t.appendChild(u),u.addEventListener(beeGame.touchstart,function(e){n.gameRule.verificode()},!1)}t.appendChild(d),s.appendChild(c);var m=this;m.items=[],o.awardingInfo=!!o.formitems[0].value,r.each(o.formitems,function(e,t){m.items.push(m._drawIpt(c,t))}),c.addEventListener(beeGame.touchmove,function(e){e.stopPropagation()},!1),r.aniClick(d,"btn",function(){if(o.awardingInfo)return r.removeDom(m.bg),n.iPrize.isOpen=!1,!1;if(m._vilidata()){if(m.formData.birthday){var t=m.formData.birthday.split("-");3==t.length&&(m.formData.birthday=t[0]+"年"+t[1]+"月"+t[2]+"日")}n.layer.loadshow(!0);var a=function(){o.awardingInfo=!0,n.layer.loadshow(!1),n.layer.alert("信息提交成功"),n.iPrize.isOpen=!1,r.removeDom(m.bg)},i=function(){n.layer.loadshow(!1),n.layer.alert("填过的信息不允许修改！"),r.removeDom(m.bg)};e.isForm?I9RIA.baoming("baoming",m.formData,a,i):I9RIA.exchange(m.formData,a,i)}}),o.awardingInfo&&s.appendChild(r.createDom("div","fm-diseable"))},_drawIpt:function(e,t){var n=null;switch(t.value=this.formData?this.formData[t.name]:t.value,t.name){case"birthday":n=a(r.createDom("input","fm-ipt")),n.attr("type","date").val(t.value.replace(/[年月]/g,"-").replace("日","")).attr("name",t.name);break;case"sex":n=a(r.createDom("div","fm-sex")),n.attr("name",t.name);var i='<div class="fm-sexi"><span class="check"></span><span class="label">男</span></div><div class="fm-sexi"><span class="check"></span><span class="label">女</span></div>';n.html(i);var s=n.get(0).getElementsByClassName("fm-sexi")[0],o=n.get(0).getElementsByClassName("fm-sexi")[1],l=function(e){s.className=o.className="fm-sexi","女"===e?(o.className="fm-sexi on",n.val("女")):(s.className="fm-sexi on",n.val("男"))};l(t.value),s.addEventListener(beeGame.touchstart,function(e){return l("男"),!1},!1),o.addEventListener(beeGame.touchstart,function(e){return l("女"),!1},!1);break;default:n=a(r.createDom(t.type,"fm-axt")),n.attr("name",t.name).attr("placeholder",t.label+":").val(t.value),"input"==t.type&&(n.attr("type","text").get(0).className="fm-ipt")}return n.attr("title",t.label),e.appendChild(n.get(0)),n},_vilidata:function(){var e=this.items.length;this.formData={};for(var t=0;t<e;t++){var a=this.items[t];if(this.formData[a.attr("name")]=a.val(),"birthday"!=a.attr("name")&&"sex"!=a.attr("name")){if("tel"==a.attr("name")&&!/^1[3-9]\d{9}$/.test(a.val()))return n.layer.alert("手机格式不正确！"),!1;if(""==r.trim(a.val()))return n.layer.alert(a.attr("title")+"没填！"),!1}}return!0}},n.wzShareLayer=function(){if(I9RIA.openid!==r.GetQueryString("wzid"))return!1;var e=a(r.createDom("div","wz-layer full"));e.append(r.createDom("div")),e.get(0).addEventListener(beeGame.touchstart,function(t){e.remove()},!1)};var u=function(e){n.btns.isShow(e),n.gameRule&&(n.gameRule.isBtnShow(e),n.gameRule.logoIsShow(!1)),n.spread&&n.spread.isShow(e),n.comp&&n.comp.isShow(e),n.shareIcon&&n.shareIcon.isShow(e)};beeGame.title="",n.refrenshShareData=function(e,t,a){var i="",s=TemplateUtils.getShare();a||!s.shareAfter?(i=s.wechat.desc,window.shareData.title=s.wechat.title):(i=s.shareAfter.desc,window.shareData.title=s.shareAfter.title),beeGame.title&&(beeGame.title=beeGame.title.replace(/<\/?[^>]*>/g,""),i=i.replace(/\{称号\}/g,beeGame.title),beeGame.title=""),i=i.replace(/\{积分\}/g,t),window.shareData.desc=i;var r={2:"https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(window.shareData.title)+"&url="+encodeURIComponent(I9RIA.share_link)+"&pics="+encodeURIComponent(window.shareData.imgUrl)+"&summary="+encodeURIComponent(i),3:"http://service.weibo.com/share/share.php?title="+encodeURIComponent(window.shareData.title+" | "+i)+"&url="+encodeURIComponent(I9RIA.share_link)+"&pic="+encodeURIComponent(window.shareData.imgUrl)};n.shareIcon&&n.shareIcon.setHref(r)},n.gameConfigInit=function(){n.gameScore=0,I9RIA.getMyScore("0",function(e){n.myMaxScore=Number(e.score)},function(){n.myMaxScore=-1}),n.pass=!0,n.hasCount=!1};var m={};m.initbeforcallBack=function(){},m.initcallBack=function(){},m.closeRuleCallBack=function(){},m.gameEndCallBack=function(){},n.init=function(e){m.initbeforcallBack(),n.gameRule.init(),n.comp.init(),n.spread.init(),n.gameConfigInit(),n.btns.init(e.join("||")),n.shareIcon.init(),m.initcallBack(),o.isEnd&&n.layer.alert(o.endtitle)},beeGame.gameStar=function(){u(!1),beeGame.gameStar=null},beeGame.gameEnd=function(e,t){n.wzShareLayer(),n.gameScore=e,n.hasCount=!0,n.pass="undefined"==typeof t||t;var a=o.score_order.toLocaleUpperCase();return!!String.isNumber(e)&&((e||0==e)&&("DESC"==a&&e>n.myMaxScore||"ASC"==a&&e<n.myMaxScore||n.myMaxScore<0)&&(n.myMaxScore=e,I9RIA.setScore("0",e,function(e){m.gameEndCallBack(e)},function(e){n.layer.alert(e.msg)})),n.refrenshShareData("",e),void setTimeout(function(){u(!0)},500))},beeGame.gameAgain=function(){n.iPrize.isOpen=!1,u(!1),window.tryAgain()},Object.defineProperty(n.iPrize,"isOpen",{set:function(t){e.raffleIsOpenCallBack&&e.raffleIsOpenCallBack(t)}}),e.loadEnd=!1,e.settingInfo={},m.initbeforcallBack=function(){e.settingInfo=o,e.initBeforFn&&e.initBeforFn()},m.initcallBack=function(){e.loadEnd=!0,e.loadEndFn&&e.loadEndFn()},m.closeRuleCallBack=function(){e.closeRuleCallBack&&e.closeRuleCallBack()},m.gameEndCallBack=function(t){e.gameEndCallBack&&e.gameEndCallBack(t)},e.btns={aboutInit:function(){},aboutClick:n.iAboutClick,aboutisShow:function(e){n.btns.aboutBtn&&(n.btns.aboutBtn.style.display=e?"block":"none")}},e.spread={init:function(){},isShow:function(e){n.spread&&n.spread.isShow(e)}},e.gameRule={isShow:function(e){n.gameRule&&n.gameRule.isBtnShow(e)}},e.shareIcon={toShare:function(){return!!n.shareIcon&&n.shareIcon.toShare()},isShow:function(e){n.shareIcon&&n.shareIcon.isShow(e)}},e.myexchange={disBtn:function(e){},isShow:function(e){},openClick:function(){n.gameRule&&n.gameRule.isShow(!0,"1")}},e.iPrize={openClick:function(e){n.iPrize.openClick(e)},resultShow:function(e,t){n.iPrize.resultMainFn(e,t)}},e.iRank={openClick:function(){n.iRank.mainClick()},setTelForRank:function(){n.iRank.setTelForRank()}},e.iForm={openClick:function(){n.iForm.mainClick()}},e.alert=function(e){n.layer.alert(e)},e.music={play:function(){n.music.play()},pause:function(){n.music.pause()}},e.adlogo={isShow:function(e){n.gameRule.logoIsShow(e)}},e.comp={isShow:function(e){n.comp.isShow(e)}}}(window.special)}]);
//# sourceMappingURL=gamecore.js.map